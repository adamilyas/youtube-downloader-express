<!DOCTYPE html>
<html lang='en'>

<head>
	<link rel='stylesheet' href='./style.css'/>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<title>Youtube Downloader</title>
</head>

<body>
	<div class="Container">
		<div class="Layout">


			<div class="Header"></div>

			<div>
				<h1 class='DownloadTitle'>Download Audio From Youtube</h1>
				<p class="InputInstruction">Input the youtube url.</p>
				<div class="SearchBar">
					<input class='UrlInput' placeholder='https://www.youtube.com/watch?v=MtN1YnoL46Q'/>
					<select class='AudioQuality'>
						<option value='highestaudio'>Quality: High</option>
						<option value='lowestaudio'>Quality: Low</option>
					</select>
					<button class="DownloadButton" onclick="sendDownloadRequest();">Download</button>
				</div>
			</div>


			<div class="ResponseRow">
				<p class="ResponseMessage"></p>
			</div>

			<div class="InfoRow">
				<div><a target="_blank" href="https://adamilyas.github.io/">About Me</a></div>
				<div><a target="_blank" href="https://github.com/adamilyas/">Github</a></div>
				<div><a target="_blank" href="https://www.linkedin.com/in/adamilyas/">LinkedIn</a></div>
			</div>
		
			<script>
				sendDownloadRequest = () => {
					const inputInstructionMessage = "Input the youtube url.";

					let audioQuality = document.querySelector('.AudioQuality').value;
					let urlInput = document.querySelector('.UrlInput').value;
					if (!urlInput.includes("youtube") || !urlInput.includes("watch")){
					const inputInstructionMessage = "Input the youtube url.";
						$(".InputInstruction").text("Please check the youtube url again.").css({color: "red"})
						return;
					}

					let postData = {urlInput: urlInput, audioQuality: audioQuality};
					let serverUrl = "https://youtubeaudiodownload.herokuapp.com"; // process.env.server_host || "https://localhost:5000"
					let endpoint = `${serverUrl}/downloadmp3`;

					window.location.href = `${endpoint}?urlInput=${urlInput}&audioQuality=${audioQuality}`;
					$(".InputInstruction").text("Downloading . . .").css({color: "black"})

				}
			</script>
		</div>
	</div>
</body>
</html>

